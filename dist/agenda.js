"use strict";!function(){var t={fields:document.querySelectorAll("input"),btn:document.querySelector(".pure-button-primary"),table:document.querySelector(".pure-table tbody")},e=function(e){e.preventDefault();var n=0,a={};t.fields.forEach(function(t){0===t.value.trim().length?(t.classList.add("error"),n++):(t.classList.remove("error"),a[t.id]=t.value.trim())}),0===n?r(a):document.querySelector(".error").focus(),console.log(n,a)},n=function(e){var n=[];e.forEach(function(t){var e="\n            <tr>\n                <td>"+t.id+"</td>\n                <td>"+t.name+"</td>\n                <td>"+t.email+"</td>\n                <td>"+t.phone+'</td>\n                <td>\n                    <a href="#" data-action="delete" data-id="'+t.id+'">excluir</a>\n                </td>\n            </tr>';n.push(e)}),t.table.innerHTML=n.join("")},a=function(){c(),d()},o=function(){console.log("falha na conexao")},c=function(){t.fields.forEach(function(t){t.value=""})},r=function(t){var e=new Headers;e.append("Content-type","application/json");var n={method:"POST",body:JSON.stringify(t)},c=Object.assign({headers:e},n);fetch("http://localhost:8080/schedule",c).then(a).catch(o)},d=function(t){var e=new Headers;e.append("Content-type","application/json");var a=Object.assign({headers:e},{method:"GET"});fetch("http://localhost:8080/schedule",a).then(function(t){return t.json()}).then(n).catch(o)},i=function(t){console.log("chamou",t.target.dataset),"delete"===t.target.dataset.action&&console.log("apagar"),t.preventDefault()};t.btn.addEventListener("click",e),t.table.addEventListener("click",i)}();