"use strict";var util=require("util"),Transform=require("stream").Transform;function ctor(t,i){if(util.inherits(r,Transform),"function"==typeof t&&(i=t,t={}),"function"!=typeof i)throw new Error("transform function required");function r(i){if(!(this instanceof r))return new r(i);Transform.call(this,i),this._firstChunk=!0,this._transformCalled=!1,this._minSize=t.minSize}return r.prototype._transform=function(t,r,s){return this._enc=r,this._firstChunk?(this._firstChunk=!1,null==this._minSize?(i.call(this,t,r,s),void(this._transformCalled=!0)):(this._buffer=t,void s())):null==this._minSize?(this.push(t),void s()):this._buffer.length<this._minSize?(this._buffer=Buffer.concat([this._buffer,t]),void s()):this._buffer.length>=this._minSize?(i.call(this,this._buffer.slice(),r,function(){this.push(t),s()}.bind(this)),this._transformCalled=!0,void(this._buffer=!1)):(this.push(t),void s())},r.prototype._flush=function(t){this._buffer?this._transformCalled?(this.push(this._buffer),t()):i.call(this,this._buffer.slice(),this._enc,t):t()},r}module.exports=function(){return ctor.apply(ctor,arguments)()},module.exports.ctor=ctor;