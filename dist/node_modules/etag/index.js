"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};module.exports=etag;var crypto=require("crypto"),Stats=require("fs").Stats,toString=Object.prototype.toString;function entitytag(t){if(0===t.length)return'"0-2jmj7l5rSw0yVb/vlWAYkK/YBwk"';var e=crypto.createHash("sha1").update(t,"utf8").digest("base64").substring(0,27);return'"'+("string"==typeof t?Buffer.byteLength(t,"utf8"):t.length).toString(16)+"-"+e+'"'}function etag(t,e){if(null==t)throw new TypeError("argument entity is required");var r=isstats(t),n=e&&"boolean"==typeof e.weak?e.weak:r;if(!r&&"string"!=typeof t&&!Buffer.isBuffer(t))throw new TypeError("argument entity must be string, Buffer, or fs.Stats");var o=r?stattag(t):entitytag(t);return n?"W/"+o:o}function isstats(t){return"function"==typeof Stats&&t instanceof Stats||t&&"object"===(void 0===t?"undefined":_typeof(t))&&"ctime"in t&&"[object Date]"===toString.call(t.ctime)&&"mtime"in t&&"[object Date]"===toString.call(t.mtime)&&"ino"in t&&"number"==typeof t.ino&&"size"in t&&"number"==typeof t.size}function stattag(t){var e=t.mtime.getTime().toString(16);return'"'+t.size.toString(16)+"-"+e+'"'}