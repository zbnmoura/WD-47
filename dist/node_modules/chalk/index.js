"use strict";var escapeStringRegexp=require("escape-string-regexp"),ansiStyles=require("ansi-styles"),supportsColor=require("supports-color"),template=require("./templates.js"),isSimpleWindowsTerm="win32"===process.platform&&!(process.env.TERM||"").toLowerCase().startsWith("xterm"),levelMapping=["ansi","ansi","ansi256","ansi16m"],skipModels=new Set(["gray"]),styles=Object.create(null);function applyOptions(e,r){r=r||{};var t=supportsColor?supportsColor.level:0;e.level=void 0===r.level?t:r.level,e.enabled="enabled"in r?r.enabled:e.level>0}function Chalk(e){if(!this||!(this instanceof Chalk)||this.template){var r={};return applyOptions(r,e),r.template=function(){var e=[].slice.call(arguments);return chalkTag.apply(null,[r.template].concat(e))},Object.setPrototypeOf(r,Chalk.prototype),Object.setPrototypeOf(r.template,r),r.template.constructor=Chalk,r.template}applyOptions(this,e)}isSimpleWindowsTerm&&(ansiStyles.blue.open="[94m");var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_loop=function(){var e=_step.value;ansiStyles[e].closeRe=new RegExp(escapeStringRegexp(ansiStyles[e].close),"g"),styles[e]={get:function(){var r=ansiStyles[e];return build.call(this,this._styles?this._styles.concat(r):[r],this._empty,e)}}},_iterator=Object.keys(ansiStyles)[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_loop()}catch(e){_didIteratorError=!0,_iteratorError=e}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}styles.visible={get:function(){return build.call(this,this._styles||[],!0,"visible")}},ansiStyles.color.closeRe=new RegExp(escapeStringRegexp(ansiStyles.color.close),"g");var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_loop2=function(){var e=_step2.value;if(skipModels.has(e))return"continue";styles[e]={get:function(){var r=this.level;return function(){var t={open:ansiStyles.color[levelMapping[r]][e].apply(null,arguments),close:ansiStyles.color.close,closeRe:ansiStyles.color.closeRe};return build.call(this,this._styles?this._styles.concat(t):[t],this._empty,e)}}}},_iterator2=Object.keys(ansiStyles.color.ansi)[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0)var _ret2=_loop2()}catch(e){_didIteratorError2=!0,_iteratorError2=e}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}ansiStyles.bgColor.closeRe=new RegExp(escapeStringRegexp(ansiStyles.bgColor.close),"g");var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_loop3=function(){var e=_step3.value;if(skipModels.has(e))return"continue";var r="bg"+e[0].toUpperCase()+e.slice(1);styles[r]={get:function(){var r=this.level;return function(){var t={open:ansiStyles.bgColor[levelMapping[r]][e].apply(null,arguments),close:ansiStyles.bgColor.close,closeRe:ansiStyles.bgColor.closeRe};return build.call(this,this._styles?this._styles.concat(t):[t],this._empty,e)}}}},_iterator3=Object.keys(ansiStyles.bgColor.ansi)[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0)var _ret3=_loop3()}catch(e){_didIteratorError3=!0,_iteratorError3=e}finally{try{!_iteratorNormalCompletion3&&_iterator3.return&&_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}var proto=Object.defineProperties(function(){},styles);function build(e,r,t){var o=function e(){return applyStyle.apply(e,arguments)};o._styles=e,o._empty=r;var l=this;return Object.defineProperty(o,"level",{enumerable:!0,get:function(){return l.level},set:function(e){l.level=e}}),Object.defineProperty(o,"enabled",{enumerable:!0,get:function(){return l.enabled},set:function(e){l.enabled=e}}),o.hasGrey=this.hasGrey||"gray"===t||"grey"===t,o.__proto__=proto,o}function applyStyle(){var e=arguments,r=e.length,t=String(arguments[0]);if(0===r)return"";if(r>1)for(var o=1;o<r;o++)t+=" "+e[o];if(!this.enabled||this.level<=0||!t)return this._empty?"":t;var l=ansiStyles.dim.open;isSimpleWindowsTerm&&this.hasGrey&&(ansiStyles.dim.open="");var i=!0,s=!1,a=void 0;try{for(var n,p=this._styles.slice().reverse()[Symbol.iterator]();!(i=(n=p.next()).done);i=!0){var c=n.value;t=(t=c.open+t.replace(c.closeRe,c.open)+c.close).replace(/\r?\n/g,c.close+"$&"+c.open)}}catch(e){s=!0,a=e}finally{try{!i&&p.return&&p.return()}finally{if(s)throw a}}return ansiStyles.dim.open=l,t}function chalkTag(e,r){if(!Array.isArray(r))return[].slice.call(arguments,1).join(" ");for(var t=[].slice.call(arguments,2),o=[r.raw[0]],l=1;l<r.length;l++)o.push(String(t[l-1]).replace(/[{}\\]/g,"\\$&")),o.push(String(r.raw[l]));return template(e,o.join(""))}Object.defineProperties(Chalk.prototype,styles),module.exports=Chalk(),module.exports.supportsColor=supportsColor,module.exports.default=module.exports;