"use strict";var TEMPLATE_REGEX=/(?:\\(u[a-f\d]{4}|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,STYLE_REGEX=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,STRING_REGEX=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,ESCAPE_REGEX=/\\(u[a-f\d]{4}|x[a-f\d]{2}|.)|([^\\])/gi,ESCAPES=new Map([["n","\n"],["r","\r"],["t","\t"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e",""],["a",""]]);function unescape(r){return"u"===r[0]&&5===r.length||"x"===r[0]&&3===r.length?String.fromCharCode(parseInt(r.slice(1),16)):ESCAPES.get(r)||r}function parseArguments(r,e){var t=[],n=e.trim().split(/\s*,\s*/g),a=void 0,l=!0,i=!1,o=void 0;try{for(var u,s=n[Symbol.iterator]();!(l=(u=s.next()).done);l=!0){var f=u.value;if(isNaN(f)){if(!(a=f.match(STRING_REGEX)))throw new Error("Invalid Chalk template style argument: "+f+" (in style '"+r+"')");t.push(a[2].replace(ESCAPE_REGEX,function(r,e,t){return e?unescape(e):t}))}else t.push(Number(f))}}catch(r){i=!0,o=r}finally{try{!l&&s.return&&s.return()}finally{if(i)throw o}}return t}function parseStyle(r){STYLE_REGEX.lastIndex=0;for(var e=[],t=void 0;null!==(t=STYLE_REGEX.exec(r));){var n=t[1];if(t[2]){var a=parseArguments(n,t[2]);e.push([n].concat(a))}else e.push([n])}return e}function buildStyle(r,e){var t={},n=!0,a=!1,l=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var u=i.value,s=!0,f=!1,E=void 0;try{for(var h,y=u.styles[Symbol.iterator]();!(s=(h=y.next()).done);s=!0){var v=h.value;t[v[0]]=u.inverse?null:v.slice(1)}}catch(r){f=!0,E=r}finally{try{!s&&y.return&&y.return()}finally{if(f)throw E}}}}catch(r){a=!0,l=r}finally{try{!n&&o.return&&o.return()}finally{if(a)throw l}}var c=r,p=!0,d=!1,S=void 0;try{for(var g,w=Object.keys(t)[Symbol.iterator]();!(p=(g=w.next()).done);p=!0){var m=g.value;if(Array.isArray(t[m])){if(!(m in c))throw new Error("Unknown Chalk style: "+m);c=t[m].length>0?c[m].apply(c,t[m]):c[m]}}}catch(r){d=!0,S=r}finally{try{!p&&w.return&&w.return()}finally{if(d)throw S}}return c}module.exports=function(r,e){var t=[],n=[],a=[];if(e.replace(TEMPLATE_REGEX,function(e,l,i,o,u,s){if(l)a.push(unescape(l));else if(o){var f=a.join("");a=[],n.push(0===t.length?f:buildStyle(r,t)(f)),t.push({inverse:i,styles:parseStyle(o)})}else if(u){if(0===t.length)throw new Error("Found extraneous } in Chalk template literal");n.push(buildStyle(r,t)(a.join(""))),a=[],t.pop()}else a.push(s)}),n.push(a.join("")),t.length>0){var l="Chalk template literal is missing "+t.length+" closing bracket"+(1===t.length?"":"s")+" (`}`)";throw new Error(l)}return n.join("")};