"use strict";var CACHE_CONTROL_NO_CACHE_REGEXP=/(?:^|,)\s*?no-cache\s*?(?:,|$)/;function fresh(r,e){var t=r["if-modified-since"],a=r["if-none-match"];if(!t&&!a)return!1;var s=r["cache-control"];if(s&&CACHE_CONTROL_NO_CACHE_REGEXP.test(s))return!1;if(a&&"*"!==a){var n=e.etag;if(!n)return!1;for(var i=!0,f=parseTokenList(a),u=0;u<f.length;u++){var o=f[u];if(o===n||o==="W/"+n||"W/"+o===n){i=!1;break}}if(i)return!1}if(t){var c=e["last-modified"];if(!(c&&parseHttpDate(c)<=parseHttpDate(t)))return!1}return!0}function parseHttpDate(r){var e=r&&Date.parse(r);return"number"==typeof e?e:NaN}function parseTokenList(r){for(var e=0,t=[],a=0,s=0,n=r.length;s<n;s++)switch(r.charCodeAt(s)){case 32:a===e&&(a=e=s+1);break;case 44:t.push(r.substring(a,e)),a=e=s+1;break;default:e=s+1}return t.push(r.substring(a,e)),t}module.exports=fresh;