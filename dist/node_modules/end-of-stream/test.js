"use strict";var assert=require("assert"),eos=require("./index"),expected=6,fs=require("fs"),net=require("net"),ws=fs.createWriteStream("/dev/null");eos(ws,function(e){expected--,assert(!!e),expected||process.exit(0)}),ws.close();var rs=fs.createReadStream("/dev/random");eos(rs,function(e){expected--,assert(!!e),expected||process.exit(0)}),rs.close();rs=fs.createReadStream(__filename);eos(rs,function(e){expected--,assert(!e),expected||process.exit(0)}),rs.pipe(fs.createWriteStream("/dev/null"));var socket=net.connect(5e4);eos(socket,function(e){expected--,assert(!!e),expected||process.exit(0)});var server=net.createServer(function(e){eos(e,function(){--expected||process.exit(0)}),e.destroy()}).listen(3e4,function(){var e=net.connect(3e4);eos(e,function(){--expected||process.exit(0)})});setTimeout(function(){assert(0===expected),process.exit(0)},1e3);