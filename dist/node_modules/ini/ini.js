"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};exports.parse=exports.decode=decode,exports.stringify=exports.encode=encode,exports.safe=safe,exports.unsafe=unsafe;var eol="undefined"!=typeof process&&"win32"===process.platform?"\r\n":"\n";function encode(e,t){var r=[],n="";"string"==typeof t?t={section:t,whitespace:!1}:(t=t||{}).whitespace=!0===t.whitespace;var o=t.whitespace?" = ":"=";return Object.keys(e).forEach(function(t,c,i){var s=e[t];s&&Array.isArray(s)?s.forEach(function(e){n+=safe(t+"[]")+o+safe(e)+"\n"}):s&&"object"===(void 0===s?"undefined":_typeof(s))?r.push(t):n+=safe(t)+o+safe(s)+eol}),t.section&&n.length&&(n="["+safe(t.section)+"]"+eol+n),r.forEach(function(r,o,c){var i=dotSplit(r).join("\\."),s=(t.section?t.section+".":"")+i,a=encode(e[r],{section:s,whitespace:t.whitespace});n.length&&a.length&&(n+=eol),n+=a}),n}function dotSplit(e){return e.replace(/\1/g,"LITERAL\\1LITERAL").replace(/\\\./g,"").split(/\./).map(function(e){return e.replace(/\1/g,"\\.").replace(/\2LITERAL\\1LITERAL\2/g,"")})}function decode(e){var t={},r=t,n=null,o=/^\[([^\]]*)\]$|^([^=]+)(=(.*))?$/i;return e.split(/[\r\n]+/g).forEach(function(e,c,i){if(e&&!e.match(/^\s*[;#]/)){var s=e.match(o);if(s){if(void 0!==s[1])return n=unsafe(s[1]),void(r=t[n]=t[n]||{});var a=unsafe(s[2]),f=!s[3]||unsafe(s[4]);switch(f){case"true":case"false":case"null":f=JSON.parse(f)}a.length>2&&"[]"===a.slice(-2)&&(a=a.substring(0,a.length-2),r[a]?Array.isArray(r[a])||(r[a]=[r[a]]):r[a]=[]),Array.isArray(r[a])?r[a].push(f):r[a]=f}}}),Object.keys(t).filter(function(e,r,n){if(!t[e]||"object"!==_typeof(t[e])||Array.isArray(t[e]))return!1;var o=dotSplit(e),c=t,i=o.pop(),s=i.replace(/\\\./g,".");return o.forEach(function(e,t,r){c[e]&&"object"===_typeof(c[e])||(c[e]={}),c=c[e]}),(c!==t||s!==i)&&(c[s]=t[e],!0)}).forEach(function(e,r,n){delete t[e]}),t}function isQuoted(e){return'"'===e.charAt(0)&&'"'===e.slice(-1)||"'"===e.charAt(0)&&"'"===e.slice(-1)}function safe(e){return"string"!=typeof e||e.match(/[=\r\n]/)||e.match(/^\[/)||e.length>1&&isQuoted(e)||e!==e.trim()?JSON.stringify(e):e.replace(/;/g,"\\;").replace(/#/g,"\\#")}function unsafe(e,t){if(!isQuoted(e=(e||"").trim())){for(var r=!1,n="",o=0,c=e.length;o<c;o++){var i=e.charAt(o);if(r)-1!=="\\;#".indexOf(i)?n+=i:n+="\\"+i,r=!1;else{if(-1!==";#".indexOf(i))break;"\\"===i?r=!0:n+=i}}return r&&(n+="\\"),n.trim()}"'"===e.charAt(0)&&(e=e.substr(1,e.length-2));try{e=JSON.parse(e)}catch(e){}return e}