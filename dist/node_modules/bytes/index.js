"use strict";module.exports=bytes,module.exports.format=format,module.exports.parse=parse;var formatThousandsRegExp=/\B(?=(\d{3})+(?!\d))/g,formatDecimalsRegExp=/(?:\.0*|(\.[^0]+)0+)$/,map={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:1024*(1<<30)},parseRegExp=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb)$/i;function bytes(e,a){return"string"==typeof e?parse(e):"number"==typeof e?format(e,a):null}function format(e,a){if(!Number.isFinite(e))return null;var r=Math.abs(e),t=a&&a.thousandsSeparator||"",o=a&&a.unitSeparator||"",s=a&&void 0!==a.decimalPlaces?a.decimalPlaces:2,p=Boolean(a&&a.fixedDecimals),m=a&&a.unit||"";m&&map[m.toLowerCase()]||(m=r>=map.tb?"TB":r>=map.gb?"GB":r>=map.mb?"MB":r>=map.kb?"KB":"B");var n=(e/map[m.toLowerCase()]).toFixed(s);return p||(n=n.replace(formatDecimalsRegExp,"$1")),t&&(n=n.replace(formatThousandsRegExp,t)),n+o+m}function parse(e){if("number"==typeof e&&!isNaN(e))return e;if("string"!=typeof e)return null;var a,r=parseRegExp.exec(e),t="b";return r?(a=parseFloat(r[1]),t=r[4].toLowerCase()):(a=parseInt(e,10),t="b"),Math.floor(map[t]*a)}