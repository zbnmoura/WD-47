"use strict";var through2=require("through2"),Combine=require("ordered-read-streams"),unique=require("unique-stream"),glob=require("glob"),minimatch=require("minimatch"),glob2base=require("glob2base"),path=require("path"),gs={createStream:function(e,r,t){r||(r=[]),t||(t={}),"string"!=typeof t.cwd&&(t.cwd=process.cwd()),"boolean"!=typeof t.dot&&(t.dot=!1),"boolean"!=typeof t.silent&&(t.silent=!0),"boolean"!=typeof t.nonull&&(t.nonull=!1),"boolean"!=typeof t.cwdbase&&(t.cwdbase=!1),t.cwdbase&&(t.base=t.cwd),e=unrelative(t.cwd,e),r=r.map(unrelative.bind(null,t.cwd));var n=new glob.Glob(e,t),i=t.base?t.base:glob2base(n),o=through2.obj(r.length?function(e,n,i){var o=isMatch.bind(null,e,t);r.every(o)?i(null,e):i()}:void 0);return n.on("error",o.emit.bind(o,"error")),n.on("end",function(){o.end()}),n.on("match",function(e){o.write({cwd:t.cwd,base:i,path:path.resolve(t.cwd,e)})}),o},create:function(e,r){if(r||(r={}),!Array.isArray(e))return gs.createStream(e,null,r);var t=e.filter(isPositive),n=e.filter(isNegative);if(0===t.length)throw new Error("Missing positive glob");if(1===t.length)return gs.createStream(t[0],n,r);var i=t.map(function(e){return gs.createStream(e,n,r)}),o=new Combine(i),a=unique("path");return o.pipe(a)}};function isMatch(e,r,t){return"string"==typeof t?minimatch(e.path,t,r):!(t instanceof RegExp)||t.test(e.path)}function isNegative(e){return"string"!=typeof e||"!"===e[0]}function isPositive(e){return!isNegative(e)}function unrelative(e,r){var t="";return"!"===r[0]&&(t=r[0],r=r.slice(1)),t+path.resolve(e,r)}module.exports=gs;