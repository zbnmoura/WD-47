/*!
 * detect-file <https://github.com/doowb/detect-file>
 *
 * Copyright (c) 2016-2017, Brian Woodward.
 * Released under the MIT License.
 */'use strict';var fs = require('fs');var path = require('path');module.exports = function detect(filepath,options){if(!filepath ||(typeof filepath!== 'string')){return null}if(fs.existsSync(filepath)){return path.resolve(filepath)};if(options.nocase === true){return nocase(filepath)}return null};function nocase(filepath){filepath = path.resolve(filepath);var res = tryReaddir(filepath);if(res === null){return null}// "filepath" is a directory,an error would be // thrown if it doesn't exist. if we're here,it exists if(res.path === filepath){return res.path}// "filepath" is not a directory // compare against upper case later // see https://nodejs.org/en/docs/guides/working-with-different-filesystems/ var upper = filepath.toUpperCase();var len = res.files.length;var idx = -1;while(++idx < len){var fp = path.resolve(res.path,res.files[idx]);if(filepath === fp || upper === fp){return fp}var fpUpper = fp.toUpperCase();if(filepath === fpUpper || upper === fpUpper){return fp}}return null}function tryReaddir(filepath){var ctx ={path:filepath,files:[]};try{ctx.files = fs.readdirSync(filepath);return ctx}try{ctx.path = path.dirname(filepath);ctx.files = fs.readdirSync(ctx.path);return ctx}return null}