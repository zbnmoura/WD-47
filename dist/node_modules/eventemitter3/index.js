"use strict";var has=Object.prototype.hasOwnProperty,prefix="function"!=typeof Object.create&&"~";function EE(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function EventEmitter(){}EventEmitter.prototype._events=void 0,EventEmitter.prototype.eventNames=function(){var e,t=this._events,n=[];if(!t)return n;for(e in t)has.call(t,e)&&n.push(prefix?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},EventEmitter.prototype.listeners=function(e,t){var n=prefix?prefix+e:e,r=this._events&&this._events[n];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,o=new Array(s);i<s;i++)o[i]=r[i].fn;return o},EventEmitter.prototype.emit=function(e,t,n,r,i,s){var o=prefix?prefix+e:e;if(!this._events||!this._events[o])return!1;var f,c,v=this._events[o],p=arguments.length;if("function"==typeof v.fn){switch(v.once&&this.removeListener(e,v.fn,void 0,!0),p){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,t),!0;case 3:return v.fn.call(v.context,t,n),!0;case 4:return v.fn.call(v.context,t,n,r),!0;case 5:return v.fn.call(v.context,t,n,r,i),!0;case 6:return v.fn.call(v.context,t,n,r,i,s),!0}for(c=1,f=new Array(p-1);c<p;c++)f[c-1]=arguments[c];v.fn.apply(v.context,f)}else{var h,a=v.length;for(c=0;c<a;c++)switch(v[c].once&&this.removeListener(e,v[c].fn,void 0,!0),p){case 1:v[c].fn.call(v[c].context);break;case 2:v[c].fn.call(v[c].context,t);break;case 3:v[c].fn.call(v[c].context,t,n);break;default:if(!f)for(h=1,f=new Array(p-1);h<p;h++)f[h-1]=arguments[h];v[c].fn.apply(v[c].context,f)}}return!0},EventEmitter.prototype.on=function(e,t,n){var r=new EE(t,n||this),i=prefix?prefix+e:e;return this._events||(this._events=prefix?{}:Object.create(null)),this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],r]:this._events[i].push(r):this._events[i]=r,this},EventEmitter.prototype.once=function(e,t,n){var r=new EE(t,n||this,!0),i=prefix?prefix+e:e;return this._events||(this._events=prefix?{}:Object.create(null)),this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],r]:this._events[i].push(r):this._events[i]=r,this},EventEmitter.prototype.removeListener=function(e,t,n,r){var i=prefix?prefix+e:e;if(!this._events||!this._events[i])return this;var s=this._events[i],o=[];if(t)if(s.fn)(s.fn!==t||r&&!s.once||n&&s.context!==n)&&o.push(s);else for(var f=0,c=s.length;f<c;f++)(s[f].fn!==t||r&&!s[f].once||n&&s[f].context!==n)&&o.push(s[f]);return o.length?this._events[i]=1===o.length?o[0]:o:delete this._events[i],this},EventEmitter.prototype.removeAllListeners=function(e){return this._events?(e?delete this._events[prefix?prefix+e:e]:this._events=prefix?{}:Object.create(null),this):this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prototype.setMaxListeners=function(){return this},EventEmitter.prefixed=prefix,"undefined"!=typeof module&&(module.exports=EventEmitter);