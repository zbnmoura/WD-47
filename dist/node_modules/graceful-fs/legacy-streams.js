"use strict";var Stream=require("stream").Stream;function legacy(t){return{ReadStream:function e(s,i){if(!(this instanceof e))return new e(s,i);Stream.call(this);var r=this;this.path=s;this.fd=null;this.readable=!0;this.paused=!1;this.flags="r";this.mode=438;this.bufferSize=65536;i=i||{};var h=Object.keys(i);for(var a=0,n=h.length;a<n;a++){var o=h[a];this[o]=i[o]}this.encoding&&this.setEncoding(this.encoding);if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(null!==this.fd)return void process.nextTick(function(){r._read()});t.open(this.path,this.flags,this.mode,function(t,e){if(t)return r.emit("error",t),void(r.readable=!1);r.fd=e,r.emit("open",e),r._read()})},WriteStream:function e(s,i){if(!(this instanceof e))return new e(s,i);Stream.call(this);this.path=s;this.fd=null;this.writable=!0;this.flags="w";this.encoding="binary";this.mode=438;this.bytesWritten=0;i=i||{};var r=Object.keys(i);for(var h=0,a=r.length;h<a;h++){var n=r[h];this[n]=i[n]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1;this._queue=[];null===this.fd&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}}module.exports=legacy;