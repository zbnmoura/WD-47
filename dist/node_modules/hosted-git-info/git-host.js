"use strict";var gitHosts=require("./git-host-info.js"),extend=Object.assign||require("util")._extend,GitHost=module.exports=function(t,i,e,o,s,r,h){var n=this;n.type=t,Object.keys(gitHosts[t]).forEach(function(i){n[i]=gitHosts[t][i]}),n.user=i,n.auth=e,n.project=o,n.committish=s,n.default=r,n.opts=h||{}};GitHost.prototype={},GitHost.prototype.hash=function(){return this.committish?"#"+this.committish:""},GitHost.prototype._fill=function(t,i){if(t){var e=extend({},i);i=extend(extend({},this.opts),i);var o=this;Object.keys(this).forEach(function(t){null!=o[t]&&null==e[t]&&(e[t]=o[t])});var s=e.auth,r=e.committish;Object.keys(e).forEach(function(t){e[t]=encodeURIComponent(e[t])}),e["auth@"]=s?s+"@":"",i.noCommittish?(e["#committish"]="",e["/tree/committish"]="",e["/comittish"]="",e.comittish=""):(e["#committish"]=r?"#"+r:"",e["/tree/committish"]=e.committish?"/"+e.treepath+"/"+e.committish:"",e["/committish"]=e.committish?"/"+e.committish:"",e.committish=e.committish||"master");var h=t;return Object.keys(e).forEach(function(t){h=h.replace(new RegExp("[{]"+t+"[}]","g"),e[t])}),i.noGitPlus?h.replace(/^git[+]/,""):h}},GitHost.prototype.ssh=function(t){return this._fill(this.sshtemplate,t)},GitHost.prototype.sshurl=function(t){return this._fill(this.sshurltemplate,t)},GitHost.prototype.browse=function(t){return this._fill(this.browsetemplate,t)},GitHost.prototype.docs=function(t){return this._fill(this.docstemplate,t)},GitHost.prototype.bugs=function(t){return this._fill(this.bugstemplate,t)},GitHost.prototype.https=function(t){return this._fill(this.httpstemplate,t)},GitHost.prototype.git=function(t){return this._fill(this.gittemplate,t)},GitHost.prototype.shortcut=function(t){return this._fill(this.shortcuttemplate,t)},GitHost.prototype.path=function(t){return this._fill(this.pathtemplate,t)},GitHost.prototype.tarball=function(t){return this._fill(this.tarballtemplate,t)},GitHost.prototype.file=function(t,i){return this._fill(this.filetemplate,extend({path:t.replace(/^[/]+/g,"")},i))},GitHost.prototype.getDefaultRepresentation=function(){return this.default},GitHost.prototype.toString=function(t){return(this[this.default]||this.sshurl).call(this,t)};