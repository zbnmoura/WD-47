"use strict";var isObject=require("isobject"),Emitter=require("component-emitter"),visit=require("collection-visit"),toPath=require("to-object-path"),union=require("union-value"),del=require("unset-value"),get=require("get-value"),has=require("has-value"),set=require("set-value");function namespace(t){function e(e){t&&(this[t]={}),e&&this.set(e)}return Emitter(e.prototype),e.prototype.set=function(e,i){return Array.isArray(e)&&2===arguments.length&&(e=toPath(e)),isObject(e)||Array.isArray(e)?this.visit("set",e):(set(t?this[t]:this,e,i),this.emit("set",e,i)),this},e.prototype.union=function(e,i){Array.isArray(e)&&2===arguments.length&&(e=toPath(e));var r=t?this[t]:this;return union(r,e,arrayify(i)),this.emit("union",i),this},e.prototype.get=function(e){e=toPath(arguments);var i=t?this[t]:this,r=get(i,e);return this.emit("get",e,r),r},e.prototype.has=function(e){e=toPath(arguments);var i=t?this[t]:this,r=void 0!==get(i,e);return this.emit("has",e,r),r},e.prototype.del=function(e){return Array.isArray(e)?this.visit("del",e):(del(t?this[t]:this,e),this.emit("del",e)),this},e.prototype.clear=function(){t&&(this[t]={})},e.prototype.visit=function(t,e){return visit(this,t,e),this},e}function arrayify(t){return t?Array.isArray(t)?t:[t]:[]}module.exports=namespace(),module.exports.namespace=namespace;