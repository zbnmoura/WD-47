"use strict";var LodashWrapper=require("./_LodashWrapper"),flatRest=require("./_flatRest"),getData=require("./_getData"),getFuncName=require("./_getFuncName"),isArray=require("./isArray"),isLaziable=require("./_isLaziable"),FUNC_ERROR_TEXT="Expected a function",WRAP_CURRY_FLAG=8,WRAP_PARTIAL_FLAG=32,WRAP_ARY_FLAG=128,WRAP_REARG_FLAG=256;function createFlow(e){return flatRest(function(r){var a=r.length,t=a,i=LodashWrapper.prototype.thru;for(e&&r.reverse();t--;){var R=r[t];if("function"!=typeof R)throw new TypeError(FUNC_ERROR_TEXT);if(i&&!A&&"wrapper"==getFuncName(R))var A=new LodashWrapper([],!0)}for(t=A?t:a;++t<a;){R=r[t];var n=getFuncName(R),u="wrapper"==n?getData(R):void 0;A=u&&isLaziable(u[0])&&u[1]==(WRAP_ARY_FLAG|WRAP_CURRY_FLAG|WRAP_PARTIAL_FLAG|WRAP_REARG_FLAG)&&!u[4].length&&1==u[9]?A[getFuncName(u[0])].apply(A,u[3]):1==R.length&&isLaziable(R)?A[n]():A.thru(R)}return function(){var e=arguments,t=e[0];if(A&&1==e.length&&isArray(t))return A.plant(t).value();for(var i=0,R=a?r[i].apply(this,e):t;++i<a;)R=r[i].call(this,R);return R}})}module.exports=createFlow;